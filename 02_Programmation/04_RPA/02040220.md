## Application aux Bases de Données

### Mise en place des prérequis
::::{exercise}
:label: exo_4_2_2_1

**Objectif**: Initialiser l'exercice en créant une base de données et en installant les modules python nécessaires

**Enoncé**
- Créer une base de données SQLite vide nommée `test.db`
- Ajouter une table `utilisateurs`.

**Instructions**

1. **Ouvre un terminal** (cmd, PowerShell, Terminal Linux/macOS).
2. Tape la commande suivante pour créer le fichier et entrer dans la console SQLite :
    ```bash
    sqlite3 test.db
    ```
   > Si le fichier `test.db` n’existe pas, cette commande le crée automatiquement.

3. Dans la console SQLite, crée la table `utilisateurs` :
   ```sql
   CREATE TABLE users (
       id INTEGER PRIMARY KEY AUTOINCREMENT,
       nom TEXT NOT NULL
   );
   ```

4. Vérifie que la table est bien créée :
   ```sql
   .tables
   ```
   > La table `utilisateurs` doit apparaitre dans la liste qui s'affiche.

5. Quitte la console :
   ```sql
   .exit
   ```
:::{warning}
Cette méthode n'est valable que pour la création d'une base de données sqlite
:::
6. Installe les modules python
    ```
    pip install robotframework-databaselibrary 
    ```
    :::{note}
    Il n'est pas utile d'installer le module "sqlite". Il est natif. En revanche, il faudra installer le module correspondant
    à sa base de données dans un autre cas.
    :::
::::

### Vérification de l'existence de la BD

::::{exercise}
:label: exo_4_2_2_2
:::{literalinclude} code/exo_2_1.robot
:::
::::

### Connexion à la base de données
::::{exercise}
:label: exo_4_2_2_3

**Objectif**: Se connecter à la base de données SQLite `test.db` à l’aide de la bibliothèque `DatabaseLibrary`.

**Énoncé**
- Établir une connexion à la base de données `test.db` c
- Vérifier que la connexion fonctionne, puis la fermer proprement.

**Mots-clés utiles**
- `Connect To Database` : établit la connexion à la base
- `Disconnect From Database` : ferme la connexion

:::{literalinclude} code/exo_2_2.robot
:::
::::

### Ajout de plusieurs utilisateurs
::::{exercise}
:label: exo_4_2_2_5
**Objectif**: Insérer plusieurs utilisateurs dans la table `utilisateurs` en utilisant une boucle.

**Énoncé**
- Ajouter les utilisateurs suivants dans la base : `Alice`, `Bob`, `Charlie`, `Diana`. 
- Utiliser une boucle pour automatiser l’insertion.

**Mots-clés utiles**
- `Create List` : crée une liste de valeurs
- `FOR ... IN ... END` : boucle sur chaque élément
- `Execute Sql String` : exécute une requête SQL

:::{literalinclude} code/exo_2_3.robot
:::

::::

### Interrogation et test conditionnel
::::{exercise}
:label: exo_4_2_2_6

**Objectif** :Lire les données de la table et vérifier que certains noms sont bien présents.

**Énoncé**
Interroger la table `utilisateurs` pour récupérer tous les noms. Vérifier que `Alice` et `Charlie` sont bien présents dans les résultats. Utiliser une boucle et une condition pour effectuer cette vérification.

**Mots-clés utiles**
- `Query` : exécute une requête SQL et retourne les résultats
- `Run Keyword If` : exécute une action conditionnelle
- `Should Be True` : vérifie qu’une condition est vraie

:::{literalinclude} code/exo_2_4.robot
:::



